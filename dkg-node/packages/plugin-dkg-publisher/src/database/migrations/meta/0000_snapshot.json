{
  "version": "5",
  "dialect": "mysql",
  "id": "bce624f5-3e5e-43f1-9e98-dce11edd5c10",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "assets": {
      "name": "assets",
      "columns": {
        "id": {
          "name": "id",
          "type": "char(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "batch_id": {
          "name": "batch_id",
          "type": "char(36)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "content_hash": {
          "name": "content_hash",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "content_url": {
          "name": "content_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "content_size": {
          "name": "content_size",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "external_id": {
          "name": "external_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "external_source": {
          "name": "external_source",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "source_type": {
          "name": "source_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "source_reference": {
          "name": "source_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "asset_type": {
          "name": "asset_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "priority": {
          "name": "priority",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 50
        },
        "status": {
          "name": "status",
          "type": "enum('pending','processing','published','failed')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "status_message": {
          "name": "status_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "attempt_count": {
          "name": "attempt_count",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "max_attempts": {
          "name": "max_attempts",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 3
        },
        "privacy": {
          "name": "privacy",
          "type": "enum('private','public')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'private'"
        },
        "epochs": {
          "name": "epochs",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 2
        },
        "replications": {
          "name": "replications",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 1
        },
        "ual": {
          "name": "ual",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "transaction_hash": {
          "name": "transaction_hash",
          "type": "varchar(66)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "blockchain": {
          "name": "blockchain",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "published_at": {
          "name": "published_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "next_retry_at": {
          "name": "next_retry_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "idx_status": {
          "name": "idx_status",
          "columns": ["status"],
          "isUnique": false
        },
        "idx_retry": {
          "name": "idx_retry",
          "columns": ["status", "next_retry_at"],
          "isUnique": false
        },
        "idx_source": {
          "name": "idx_source",
          "columns": ["external_source", "external_id"],
          "isUnique": false
        },
        "idx_pending": {
          "name": "idx_pending",
          "columns": ["status", "created_at"],
          "isUnique": false
        },
        "idx_content_hash": {
          "name": "idx_content_hash",
          "columns": ["content_hash"],
          "isUnique": false
        },
        "idx_batch": {
          "name": "idx_batch",
          "columns": ["batch_id"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "assets_id": {
          "name": "assets_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "assets_content_hash_unique": {
          "name": "assets_content_hash_unique",
          "columns": ["content_hash"]
        },
        "assets_ual_unique": {
          "name": "assets_ual_unique",
          "columns": ["ual"]
        }
      }
    },
    "batches": {
      "name": "batches",
      "columns": {
        "id": {
          "name": "id",
          "type": "char(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "batch_name": {
          "name": "batch_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "source": {
          "name": "source",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "total_assets": {
          "name": "total_assets",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "pending_count": {
          "name": "pending_count",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "processing_count": {
          "name": "processing_count",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "published_count": {
          "name": "published_count",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "failed_count": {
          "name": "failed_count",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(now())"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_batch_status": {
          "name": "idx_batch_status",
          "columns": ["created_at", "completed_at"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "batches_id": {
          "name": "batches_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {}
    },
    "metrics_hourly": {
      "name": "metrics_hourly",
      "columns": {
        "hour_timestamp": {
          "name": "hour_timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "assets_registered": {
          "name": "assets_registered",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "assets_published": {
          "name": "assets_published",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "assets_failed": {
          "name": "assets_failed",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "avg_publish_duration_seconds": {
          "name": "avg_publish_duration_seconds",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "total_gas_used": {
          "name": "total_gas_used",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "unique_wallets_used": {
          "name": "unique_wallets_used",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_metrics_hour": {
          "name": "idx_metrics_hour",
          "columns": ["hour_timestamp"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "metrics_hourly_hour_timestamp": {
          "name": "metrics_hourly_hour_timestamp",
          "columns": ["hour_timestamp"]
        }
      },
      "uniqueConstraints": {}
    },
    "publishing_attempts": {
      "name": "publishing_attempts",
      "columns": {
        "id": {
          "name": "id",
          "type": "char(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "asset_id": {
          "name": "asset_id",
          "type": "char(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "attempt_number": {
          "name": "attempt_number",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "worker_id": {
          "name": "worker_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "wallet_address": {
          "name": "wallet_address",
          "type": "varchar(42)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "wallet_id": {
          "name": "wallet_id",
          "type": "char(36)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "otnode_url": {
          "name": "otnode_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "blockchain": {
          "name": "blockchain",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "transaction_hash": {
          "name": "transaction_hash",
          "type": "varchar(66)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "gas_used": {
          "name": "gas_used",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('started','success','failed','timeout')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "ual": {
          "name": "ual",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "error_type": {
          "name": "error_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "duration_seconds": {
          "name": "duration_seconds",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "idx_asset_attempts": {
          "name": "idx_asset_attempts",
          "columns": ["asset_id", "attempt_number"],
          "isUnique": false
        },
        "idx_wallet_usage": {
          "name": "idx_wallet_usage",
          "columns": ["wallet_address", "started_at"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "publishing_attempts_asset_id_assets_id_fk": {
          "name": "publishing_attempts_asset_id_assets_id_fk",
          "tableFrom": "publishing_attempts",
          "tableTo": "assets",
          "columnsFrom": ["asset_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "publishing_attempts_wallet_id_wallets_id_fk": {
          "name": "publishing_attempts_wallet_id_wallets_id_fk",
          "tableFrom": "publishing_attempts",
          "tableTo": "wallets",
          "columnsFrom": ["wallet_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "publishing_attempts_id": {
          "name": "publishing_attempts_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {}
    },
    "wallet_metrics": {
      "name": "wallet_metrics",
      "columns": {
        "wallet_id": {
          "name": "wallet_id",
          "type": "char(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "date": {
          "name": "date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "total_publishes": {
          "name": "total_publishes",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "successful_publishes": {
          "name": "successful_publishes",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "failed_publishes": {
          "name": "failed_publishes",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "avg_duration_seconds": {
          "name": "avg_duration_seconds",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "total_gas_used": {
          "name": "total_gas_used",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "wallet_metrics_wallet_id_wallets_id_fk": {
          "name": "wallet_metrics_wallet_id_wallets_id_fk",
          "tableFrom": "wallet_metrics",
          "tableTo": "wallets",
          "columnsFrom": ["wallet_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "wallet_metrics_wallet_id_date_pk": {
          "name": "wallet_metrics_wallet_id_date_pk",
          "columns": ["wallet_id", "date"]
        }
      },
      "uniqueConstraints": {}
    },
    "wallets": {
      "name": "wallets",
      "columns": {
        "id": {
          "name": "id",
          "type": "char(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "address": {
          "name": "address",
          "type": "varchar(42)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "private_key_encrypted": {
          "name": "private_key_encrypted",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "blockchain": {
          "name": "blockchain",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": true
        },
        "is_locked": {
          "name": "is_locked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "locked_by": {
          "name": "locked_by",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "locked_at": {
          "name": "locked_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "total_uses": {
          "name": "total_uses",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "successful_uses": {
          "name": "successful_uses",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "failed_uses": {
          "name": "failed_uses",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "idx_available": {
          "name": "idx_available",
          "columns": ["is_active", "is_locked", "last_used_at"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "wallets_id": {
          "name": "wallets_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "wallets_address_unique": {
          "name": "wallets_address_unique",
          "columns": ["address"]
        }
      }
    }
  },
  "schemas": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  }
}
